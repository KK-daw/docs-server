= Release Notes for Couchbase Server 7.0

Couchbase Server 7.0 introduces scopes and collections that provide new database organizaion structures within Couchbase. It also brings new capabilities to the Query Service in addition to support for scopes and collections. 

Take a look at xref:introduction:whats-new.adoc[What's New?] for a list of new features and improvements in this release.

[#release-700]
== Release 7.0.0 (July 2021)

Couchbase Server 7.0 was released in July 2021.

_Quick Links_: <<major-changes-in-behavior-700>> | <<supported-platforms-700>> | <<known-issues-700>> | <<fixed-issues-700>> | <<common-vulnerabilities-exposures-700>>

[#major-changes-in-behavior-700]
=== Major Changes in Behavior from Previous Releases

* With the introduction of scopes and collections, Couchbase Server stores documents in a collection, which are contained in a scope, which is in a bucket. A default scope and default collection is used when a named scope and collection is not available or has not yet been created.
When you upgrade to version 7.0 from a previous version, your documents will be available in the default scope and default collection. The migration guide provides information on how to migrate your data from a previous version of Couchbase to take advantage of named scopes and collections.
** Global secondary indexes need to be created for each collection. 

* Global secondary indexes now supports concurrent builds. 

* Keeping in line with recommendation from the PCI council, we strongly recommend that clients which use TLS encryption support TLS 1.2, and have updated the default minimum TLS version for new clusters to TLS 1.2. 
+ 
If you do need to configure the minimum TLS to a lower version (not recommended), follow the instructions provided in https://docs.couchbase.com/server/current/manage/manage-security/manage-tls.html#set-the-minimum-tls-version.

[#supported-platforms-700]
=== New Supported Platforms

This release adds support for the following platforms:

* macOS Big Sur for development only
* Ubuntu 20.04

See xref:install:install-platforms.adoc[Supported Platforms] for the complete list of supported platforms.

[#deprecation-700]
=== Deprecated Features and Platforms

==== Deprecated and Removed Platforms

The following platforms are deprecated and will be removed in a future release:

* CentOS 8
* macOS 10.14 (Mojave)
* Microsoft Windows Server 2016

The following platforms are removed and no longer available: 

* Ubuntu 16.04 LTS

[#deprecated-features]
==== Deprecated and Removed Features

* The 'cbdocloader' tool used to load sample datasets is deprecated in this release. You can use the 'cbimport' tool with the '--format sample' flag as the 'cbimport' tool provides an equivalent feature set and is collection-aware.

* The MOSS index type, available in the full-text search service, is deprecated in this release.

* Support for passwordless buckets in the query service is deprecated.

* The search_query() function is deprecated. We recommend that you use Search() functions instead to run full text search queries directly within a N1QL query. Refer to https://blog.couchbase.com/n1ql-and-search-how-to-leverage-fts-index-in-n1ql-query/ for information on changing the syntax to leverage the Search() function. 

[#known-issues-700]
=== Known Issues

This section highlights some of the known issues in this release. 

==== Cluster Manager

[#table_knownissues_v700-cluster-manager,cols="25,66"]
|===
| Issue | Description

| https://issues.couchbase.com/browse/MB-40654[MB-40654^]
| *Summary*: Operations to create or drop a scope or collection sometimes fail with a 503 status error.
|===

==== Data Service

[#table_knownissues_v700-data,cols="25,66"]
|===
| Issue | Description

| https://issues.couchbase.com/browse/MB-44660[MB-44660^]
| *Summary*:  The disk consumption on Data(KV) nodes was observed to be high, which is caused by FTS having multiple open DCP streams which backfill over time.

| https://issues.couchbase.com/browse/MB-38978[MB-38978^]
| *Summary*:  Under certain circumstances, such as running a cbcollect_info, requests may take longer than normal. Depending on the system workload and size, this may be even a few seconds, which can trigger the default timeout value from SDKs. 

*Workaround*: We recommend that you avoid gathering these stats or cbcollect_info during higher workload.
|===

==== Index Service

[#table_knownissues_v700-gsi,cols="25,66"]
|===
| Issue | Description

| https://issues.couchbase.com/browse/MB-46725[MB-46725^]
| *Summary*: In the case of an unsafe failover that removes one or more index nodes from the cluster, the *Rebalance* button on the UI may not be enabled even though some indexes or index partitions are not available because the remaining index node(s) did not have any of their replicas.

*Workaround*: Issue a rebalance command via CLI `couchbase-cli rebalance -c 127.0.0.1:8091 -u Administrator -p xxxxxx`
|===

==== Tools, Web Console (UI), and REST API

[#table_knownissues_v700-tools-ui-rest-api,cols="25,66"]
|===
| Issue | Description

| https://issues.couchbase.com/browse/MB-44613[MB-44613^]
| *Summary*: In cases where the node list is long, the ability to upload logs from the UI may be hampered.

*Workaround*: Use alternate ways to capture logs such as cbcollect via REST or CLI.
|===

[#fixed-issues-700]
=== Fixed Issues

This section highlights notable issues fixed in this release. 

==== Data Service

[#table_fixedissues_ 700-data,cols="25,66"]
|===
| Issue | Description

| https://issues.couchbase.com/browse/DOC-7873[DOC-7873^]
| *Summary*: When an operation takes a long time, the durability out-of-order enhancement enables looking ahead in the queue and swapping for an operation that's faster. This behavior is enabled by default and you can choose to disable it. See Java SDK documentation for further information.

[#common-vulnerabilities-exposures-700]
=== Common Vulnerabilities and Exposures

This section lists common vulnerabilities and exposures that are fixed in this release. 

See http://couchbase.com/resources/security#SecurityAlerts[Enterprise Security Alerts] for the complete list of common vulnerabilities and exposures.

==== Product Vulnerabilities

This section lists security vulnerabilities in the product that are fixed in this release. 

* https://nvd.nist.gov/vuln/detail/CVE-2021-23840[CVE-2021-23840]
* https://nvd.nist.gov/vuln/detail/CVE-2021-21409[CVE-2021-21409]
* https://nvd.nist.gov/vuln/detail/CVE-2021-21295[CVE-2021-21295]
* https://nvd.nist.gov/vuln/detail/CVE-2021-3450[CVE-2021-3450]
* https://nvd.nist.gov/vuln/detail/CVE-2021-3121[CVE-2021-3121]
* https://nvd.nist.gov/vuln/detail/CVE-2020-13956[CVE-2020-13956]
* https://nvd.nist.gov/vuln/detail/CVE-2019-11324[CVE-2019-11324]
* https://nvd.nist.gov/vuln/detail/CVE-2020-11023[CVE-2020-11023]
* https://nvd.nist.gov/vuln/detail/CVE-2019-10768[CVE-2019-10768]